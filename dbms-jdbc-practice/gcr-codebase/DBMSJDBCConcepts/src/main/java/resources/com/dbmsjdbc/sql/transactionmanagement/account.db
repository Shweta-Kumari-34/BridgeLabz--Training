============================================================
 Problem: Exercise 2 - Transaction Management (Banking System)
 File: account.db
 Table: account, transaction_history
 Database: practice_db
============================================================



USE practice_db;
Database changed
mysql> CREATE TABLE account (
     account_id INT PRIMARY KEY AUTO_INCREMENT,
     holder_name VARCHAR(60) NOT NULL,
     balance DECIMAL(12,2) NOT NULL
     );
Query OK, 0 rows affected (0.04 sec)

mysql> CREATE TABLE transaction_history (
     txn_id INT PRIMARY KEY AUTO_INCREMENT,
     from_account INT,
     to_account INT,
     amount DECIMAL(12,2),
     txn_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
     FOREIGN KEY (from_account) REFERENCES account(account_id),
     FOREIGN KEY (to_account) REFERENCES account(account_id)
     );
Query OK, 0 rows affected (0.07 sec)

mysql> DESC account;
+-------------+---------------+------+-----+---------+----------------+
| Field       | Type          | Null | Key | Default | Extra          |
+-------------+---------------+------+-----+---------+----------------+
| account_id  | int           | NO   | PRI | NULL    | auto_increment |
| holder_name | varchar(60)   | NO   |     | NULL    |                |
| balance     | decimal(12,2) | NO   |     | NULL    |                |
+-------------+---------------+------+-----+---------+----------------+
3 rows in set (0.00 sec)

mysql> INSERT INTO account (holder_name, balance) VALUES
     ('Ichigo Kurosaki', 82000),
     ('Edward Elric', 67000),
     ('Harry Potter', 105000),
     ('Sailor Moon', 88000),
     ('Tony Stark', 150000),
     ('Bruce Wayne', 130000),
     ('Lara Croft', 95000),
     ('Master Chief', 115000);
Query OK, 8 rows affected (0.01 sec)
Records: 8  Duplicates: 0  Warnings: 0

mysql> SELECT * FROM account;
+------------+-----------------+-----------+
| account_id | holder_name     | balance   |
+------------+-----------------+-----------+
|          1 | Ichigo Kurosaki |  82000.00 |
|          2 | Edward Elric    |  67000.00 |
|          3 | Harry Potter    | 105000.00 |
|          4 | Sailor Moon     |  88000.00 |
|          5 | Tony Stark      | 150000.00 |
|          6 | Bruce Wayne     | 130000.00 |
|          7 | Lara Croft      |  95000.00 |
|          8 | Master Chief    | 115000.00 |
+------------+-----------------+-----------+
8 rows in set (0.00 sec)

==============================================================

               Transfer Money (Using Transaction)

==============================================================

mysql> START TRANSACTION;
Query OK, 0 rows affected (0.00 sec)

mysql>
mysql> UPDATE account
     SET balance = balance - 5000
     WHERE account_id = 1;
Query OK, 1 row affected (0.00 sec)
Rows matched: 1  Changed: 1  Warnings: 0

mysql>
mysql> UPDATE account
     SET balance = balance + 5000
     WHERE account_id = 2;
Query OK, 1 row affected (0.00 sec)
Rows matched: 1  Changed: 1  Warnings: 0

mysql>
mysql> INSERT INTO transaction_history (from_account, to_account, amount)
     VALUES (1, 2, 5000);
Query OK, 1 row affected (0.01 sec)

mysql>
mysql> COMMIT;
Query OK, 0 rows affected (0.01 sec)

==========================================================================

                          Check Balance

==========================================================================

mysql> SELECT account_id, holder_name, balance
     FROM account
     WHERE account_id = 1;
+------------+-----------------+----------+
| account_id | holder_name     | balance  |
+------------+-----------------+----------+
|          1 | Ichigo Kurosaki | 77000.00 |
+------------+-----------------+----------+
1 row in set (0.00 sec)

mysql> SELECT * FROM transaction_history;
+--------+--------------+------------+---------+---------------------+
| txn_id | from_account | to_account | amount  | txn_time            |
+--------+--------------+------------+---------+---------------------+
|      1 |            1 |          2 | 5000.00 | 2026-02-08 23:25:53 |
+--------+--------------+------------+---------+---------------------+
1 row in set (0.00 sec)

==========================================================================

                   Transactions of Particular Account

==========================================================================

mysql> SELECT *
     FROM transaction_history
     WHERE from_account = 1 OR to_account = 1;
+--------+--------------+------------+---------+---------------------+
| txn_id | from_account | to_account | amount  | txn_time            |
+--------+--------------+------------+---------+---------------------+
|      1 |            1 |          2 | 5000.00 | 2026-02-08 23:25:53 |
+--------+--------------+------------+---------+---------------------+
1 row in set (0.01 sec)

mysql>